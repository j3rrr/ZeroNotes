local _, ZN, L = ...

local ZBMImportString = "!WA:2!9YZsWTrY1jS0RTcwBVAP2v27A74EN1scWcecF4hjTRSdbjOi9YFlaKwPLIMyaMgyMLaZmAMb8J0Y4YS2kLQuPsLWkLRujvLkfpKt5epKB2XroX5AxSYbEw5qoKB7HuLpKpVx39myaWaQpojqfb6P7x)6x)EV(1V(1VrXAmQA8rDlLpDM0JpA7r1gv7Xzl00XABLBV6tRz5OrDkOwFtnhlB7ZvOLXdFOQJgPILvlpdBNDwPrdxQ38)Yh)KR)4ZCMZ4SRFfn(j)3WZN5ivZ66woRAzy6vBMIlxPyPJeyDgRwwo)OyXInY(WOv2wToDKCDCAz)T098SDVXvV62QnTsByDvx35Z9rAFARp8Qt5Ow3ZWY0DYsUEQoEXR1WW0WvpEb4hV4775y0Sj1XD5l5il(Zk4TRnTGAhh1N62PgDlQPx5onAySZrBmZ0LRSr5ktxQsjE91MNQ2YtVqhax1SBPUl1zFxBARwlO5g)WAqVkRBT9kMpXL)Z0aPSfnaRR6qbSwQ8QfxCXsMQTPqF0OyVQauGZ8fxC15U9Ih0XuszXpsZW9t7yYXso1wTSFdvE5kI2xYsJ(3EMJQB1QtBtb7PMJQMrh3p)RUFhx6IgTn80lP2YOPj7Sf0OU1F6NqDSifSCDjqVDb(QNkYUI5SfWuGcVEHwwQA)Ahdtqc3X(cLA3beJXR5P2cMbxGLnEbycxhluQElvxxS0HAga)Qoa5UCiCSArXconecdS8b2BzhcjGyIdYbaDUbhr6oIMZjgeJhYB)4AsvlHYWiJmYQJKj9eoQMgTv9O6hikadYKSV(CpHQ6sl75qnB6P)vyNVGPLj9ynq0IqSbkODCP1TmHPockY3ztxOTQH5CSFpOdSPzfyZWMf(917VMsU1bcCKJv74b6RRyZvZIxtORQFO43IAnP2Vr5h0r1HsMRtRwKpw3WJEOdTjaooEprBxq2BuNZFL9QmmBF1sTq51RvYfLKVQdO(Ic5yh2aWYmgo1BrRMRJH2rtuPKU9dY35JN962Ftq0A5qLetrulROJJLJB1cUwoEhIYCQPginFIyKel(E3AU02GeVuwyr9Kh6zvxk()MX24pvXqRugYNuyPJA4akPa7u1tDKdA6yO9XgAE6V2xiwXoh2koJQvEMsflUSCv7cMWaeRgWKBy0m(tHFHzIP3CGQGLtTstp7c3U8(iYWUQuA2duDQVixG95x4qu0yiySFbypG6yQ26ocsBPdCPTAimtuyLkvwzPrR)op(JoeyxoBYjS3QqZwwBRFShDhVSZzblJb26eSB9x)2ZvaRZon5z8zSXgJVaz2clbfzN)iK)5yW5U73qIXsTuDAslTnoKV6DCaf4LbgHo7810PQadG1(vCmTwIcaPZCgPb0GNvZMTOa3PHkSirp3M0DDCT6yQTIzb0qWHRc2siLXAq8nlmQYUY2ITToBhyfMlAVz6wTyp0E0zfpraBcKkgTbge7Z6Td7JmRvmBTla(5qJsel4bs7DX6faFhMlq0mpGEzDWkMJ1(OB7sjLQqw2YJcTzXSzpyiGEWY7Ez1wwE6QcaR1McMEAhf0sYQkBNc5YN76ShU)hd6u6atThYw0E(Xzp8PRcR41PEKYBAaQFravUPypSWsWsXOA7AWK(cZcQfKfmFqhdxdqZJCxvtkqxrmG5zp8jv0PK5btRTnm1IcMjau(nkRRQDzDvhIhanONdwvuR1Igb8Jd48OzDOUExwTjmvJcLtYEOZDO7aCHOMG5ZcJ4BwsDmnQjF8aLcBlJw0OiVXrY7BVqRl3CxtqIKImJLJthUAlPefwxgjJEkuvAgvhv0GdXQbz5l)jwrsRJposmIM5eJe)wo9R3nkq2LMf2uR5quY(zSZxYW02xWX25jctyLXTrDpGVDtldtyPZdT)olWBIWBJSWSUKgGGe3BLaleaopA14TyB)k4UicBi6SVCm2xHD2J5Mfk5V9g71yF1Va3kbT6AQf4zbFZKdWv2Z1sTPRZk3UYIlSCXdnadrBu3FlNrEc3KsrtuARvLPZo7(1uL(Nmc4FcANv1d3MHQFihwUDQsLw4wZx5jCsry49EXEk2CU58hr2Fd7Q)A27hSvOj4PGJoJVjilp)7j4Fpj)7m8VVg)7RZ)Ek(3JZ)(dWVFAG5p)b4dDqNBac(4GXgTJL1bFSJdTaaOxHhAz1og4gKNvv2NG7dWN05KtADM6JFd2U6S9QY(ZRY(dQY(tQY(ZQY(zvz)vhNpZKzZMnf8Zu5Ny0S6S)WQShxLDqv2prN9xuL9hxL95vz)rvzJW(sL6YvpSEhxpR2vGHzNyxSb3rhlZeBKs8p0WyY4OzzJgeCgSb1ClIQPwWdPHDw8OOcPzCFt4TSGDPj2ownj3Spatt3X2q4kaA0Kmg5wupSuIKbDhgkEF)bKm9Ix8JdfyxMexp09O0GUi45rcLlMUbGQl6QqsX7Bksxkh)qBb2uJcpiyDHYulU)V4Fr)X(n6rVg9aSW03UYkS34V6sSr)pGTAe80Je)SHUHgTKhmf1yVf7cS3LPW(DzF3JBsnPog1foRY(oS3M9omsC2VyNx96bIbyVfoxZvmtI3L5sdXzdvnFdnOPgQWewmxshGeSl(L7xMMw4RWAkYTevwVxwVpI9C6qF)4Hzw99fGtAAUB)C5Be6f1TAxtv06n7k9bXxO(f0LWkf00axeK6URbQrlm76bTnGsYyJrtd(QP6uP8T7Nj2dmViKspKd(bneUzkYwedtITQHJBI(PWKenR497Gdmt2K87FtIcyRPufCxELbGbxHnqLBTw21jrckSHdqY6qrWmXABneO49Fms2mKpiSqyayr2jzOZ6EfMOrAG3rt70ETTwl36RZhPUpgzxXnqOTO19sKpfY257TSGzdReyFsMKmSEHnhzBrwjnnk(Jpmhnd0lsnuqqow60BEAaKF9H3QcFvVYWbiBMH3w4vrxHtjdh2tbnOaA4TAA0kfzOTYx0FAt(XJwAKCiIJqkOcljdaNVrLOEoCzP17aCiTyZ(wXfhZ31(dlU8mRCBmsgIGhKI0TIIlpBkYQlo99GYLkERIlVXSluE6clwS)QlUmV2s11P13SwhBnqDX3SoEq2J4kqI6zFd238leTDhvhUtPU2V5JIRzvwA7uPMLvlL47XEV4WgfGtySFb7Fg62)ay9h2rG9Ry)JisGTaI9VfSfaF6KcC8kfjD60j7XqROrYnbu33STRffC5yIaR8(MNaBt46P(T(VWSPtROaRaJlxWfAeIKFjgNE8haJMstbc4gscOeByhBVez7QCe2ZaNbScpiyGfvaa4lGWYgAJHe9pnc3dXeAWTieutUEvvd6igOQeHrtYivddGqQzdK3J27uvs5IVU(wW9i4Vh0dEVlGI9p6LxSd60DfgiJ6MKbP)trIkv1FreO9jyYC6cwWuZZjFRR4mylC)AIyV8HykWNb)9yx0EuPtUIq2TOvtJ62jcy1EcC5JhClMWo)XU0F7zSFZ6WsxnRTnrhLHt(l9hV5spf2eFATpfWpvBjdtD2peJbw)XXQ4J)w14(CxAKA8iyTZiINNEKduBzRRYdc2VquxbzB3s22CaHUtSAb0l6FlCQw3ueo7nfrJ2YtDaV0huqY5CdP6(8l)5dQWEVd(uKV3vz952NQzZwOEqa9t((KCWFG)76PTnqVUsiltUkj3acy(Kf2jmrcbyUgG)XiotcvMn5vZLeqwiwH)QTWD)u8Qh(SVFqkZbhiTgpSS0yhJNi0Zr10TfpwN4JCXs1d4ssu6y)xomHZDL)Ep4xe67k)9E(tVWu3DXzxiUtcrxagJO5Kj9XwKaEpFaVxYWCaCBgreErLQQO(4XbZhK6FfHk5UJuIpVw9lbZ(SDbrOAo6UXgDNyhWXHOgX0hlFmCymvJM6ELXAeWiuA)YrWxCYMI0e(Rg8Nk8Nto4z4VAWFQ5(Tvnw1Pz24dCMaHgOtQMPQf(ePW2fWj99MV4DtebAgqdK3)uzh80p(T3ZmlSriWCaykGlf4CnD2RFh4CI2ahH6XTqiGG9VZELVWpA7lyoNJLPNo7FDe7ZfYmJWqZtD9mQV5UZkvzLH8yMUhSNFi1UpZs)6h62PwjEmWD)KToweP4nS4Xe518Fuew5C1uDKHsEd8waExzKR7gogEqBK380gBz4Aage197cvRjTWYwMu25pagtrTxGD(JKXazd4VhFb73fj5n4Fjoh)g2BGEmVbWxQBGXBo2bbGOCrB7ZXFYvxfSe39IPEQOw)atZ(52NNxdggf8AjQZdmDHPHh)cXGzSdveg9F6XI579ergkgpClBGSzJg7Yo7HcBaOn)clVYYfzN3bMoimCUDOGtDGCwy6DyXDqXQ72Q7ApAi6voeF7Z0tT3vu7i8OcTX2aJ6JDuT3)JLfooaT81C)gjhi0T1D0clVmUhopix8gLcJQ2VDeSxrb2VSlIXOq92s2GKAIz)DhMKrEVj6p(npj2xDe2)PYfnz)xCPa7)M9Zpj2zojwStI9k)0tInc87xID2tI9QNe7lZo)jX(kNe7SCE1jX(Dojw8tI9AFBa6V2jX(6Ne71z)MtIDUdfZLfloxLtInA1tI9MV9jXERyrmrm9NitliKiaXnaeKkDFzOs7ZnNJXdjFuhvn86xivQebrF0cZSYYBiUZuFkgP(A6u0Ky(s8i4bAVL4liH1T4pfAbwhWihLB6zNT)v3Q7OZ(XSnec7CZacjvdZ24vFUWYLxy2I2NRBq7UT4Sh)6dcI4iWB7XPeeBVASdL4YxHvXqZ(8RsDCTmblJZwyjcSM0Lm(X(xGK02ZndwSFapESUgA0cOesGqXkUZY(AGxpxQe)8I23yb8sJAOwNE)P10aJn3)JPQBonS039(RATn1HxCjQMH695hnY9(1v9YL2QzZ91S2GJeWa5Loj2y257bxR0dU6bdtB4mVLJjIKtIDvD25Ue4pDIZgrWYgBSvDS6O1Axc38lGFnsTDjFO5V6Vd9EGwxha5f5dcE)NJTCXk3E1OVCRxuSdWtkUJAB7w0BGLxJAwhMZaBbpeh44CC5W)iI8AvjPeHLjfPnyisTj3agbEeTx1XHSxQUDjxEO(StDTPgpduqHkgic3Ilwrd(hfzF2loN(jkYrsHy4sWRcOTQ5UbdpOsyXVHIg4kacElS7A1Hio75pKGxZtbvXDi4IrJYVF1OnWBAWthqkATHps4mrHuxf8mxDtkrLiURF4Cr4U)k8N4rXvbCFe04bSGXJ7bDSWtjKIFkxc4EIgqJoBsXdaLUzAOJB2PvlLK8XieBsHGlBiMukqqW0im2i164XNji1ydL3wxvuX2QWrQm43rKdnfbpIfHc70BtHj3d6asmkhBsbaYBqo87YhD(Uik9mKQeD6oYyCdE110Yc9DwbRucDd(86bDaFaevrSHIuhU6sbAlqMWjMl7cGvRLQ5MKazlE4foc(qhl3oUPjyFMULRfYDPE4TqbZwpHfbpCoItyGSaZkAifYBDxCMaG7HbuGy1XdnnG9fz2sKIyRAVhKSkjrnK8sIiQkEQTQyjk)ko4ygWxkG1c7Yq22aeU87AItlBJh)e53nPC2TiiMauE6KPx(EvMFHLVfNbubvHqlf4yZPEtahQ4ueMdqxf7nGxnh4y6waHZTbuCNsvWyPsDtlWcL)erxvk94wIjpYq7gFaM)glO9d2dK2O(ewx294Cv(0e7pE1Ve8E0CfKiQtdUx222LK4r4d3yjJBuU8Ej5lrWlPhiehQgFW5MQbYINJkaEBb8mbvkULoEF43HGkYXarhpdoekdiGQoPjlH3KhkZfyb8OxS8reUAokufiMpMlG0qpCeGFGa5l4blMOTyI8UletoExNUwnh6wgCEQ8kcXbsmUs1NaelwPquMzwWcY0ooQ7YhDqGQ6ISCjrAeIwq4XrJJlGmR3QdOTXzRkF2hGlM(bksrHYNPwRUcsUYlSN35Mg4IseW0X56iaBSUbS5Whs3f97YLBCvzAWOGWceF04kGaPJ6GM8PfE3G7cU2YH(wuy9JIqDJdA4ruKNsWg1aEqRyPjZRgSa3Jdc4eaF1M)KtYF5SEvyfTnnnPimNUbmPeJfFyfyEvlVNXyBB59)gJCOHd5C4f)JBEG38p)iq8QUgwm677Vlqxhl6N3bbvNplwmQRzVli5XIHtqGUnnowS3KvOBJtW3no6CgOlutIfL5bq3A5ZYbVB(aagNtuHYWGUTWPPOUR(UGWPStlDb4GImCplnluUlUKEqEbwF5RqC51AkSqQk3hKSL)IV4XdUpkUFcicxd5jC3gi4AaGXa8LGd6(iYKza3bYCTCxd(vzjqC2XLmFLkWAlLmzMSHwDURaDHpBgaWRFTmzUwx4x0a2T5kKkafza703P9q7DUmVGdhhqWxfODb6R4OA(ayWcn0yNBqNQwMR3BNfbyuwtaZiFaZWxZk0Wn1eaUGDH5XzsjLYsRCNIWpnAmv(mz6NtKn8C5u5ztGOTopDYEginxUEaTCLPV3qbnFijHuem)UTnXBpAjyZud(QZHZzVoosy8JctsnAmW4KhLzxdCzmhap4hNJb4u1vif3cys4qwPc89DGD5qvaRADh2gu8Fptzs2abcAUv6qqOXFcF)vtPaNDQ87c0zMmZbF6NlJ0NWlpOaMtv(h3XfRyU5WEPq6Jlmo00S02WIWY2gBs5GcMyD0eo9i9ueRnp)t)mhyqZMFIRNzsaIpRoswzGpfxU003Q4N5WzdngSFs2GGlSx8N1gQXdCPc2bT7sBUWh5EkILbs(51VwErTfD02wfzhIgawiVA(si)kNC8RnoFjHcx3XVAU8MxTuIhGDUcVOdOkVO285V21Zkbhx(7tjtnvor1ZH(bB4Q7304tnr(j5Tus1gZhg)gYn(K5U2ucYh1WOG1V2kHyu9VnExEJROfHtnbmj5E2igNipOgnHCGcVPk244tMFIXVgog9CPqacnEiEHfpkClCx(8t7cu11xT93YJso7kKLxPcPYk3EM5)FJJsI3lFiwHy1bN529C23VY0LUvXkGR0ZvA6LkE)7F7fgRe4sFfmJlXjfYq34AGQm6GpIbj2QdNMW9LdBtjWghd(0gp9DF5q3KsIJJcj(ABzz(YHTjeydrGexb7i8sHVXf4ZhjsCQzOcwD0E5qzEbkL4WxEi214LcH5Kceok8Li4EdVuylRcxCa9hxpjdgppq0a2ccOtArvUDV(wdT1LvgATM)Lng9Di2T6kLVnUICGuPsCPQODurQIHrwvukR4NC8BzP(MUIWOKIitrVuY8HO7fYgGZ1eHIP3Nbt2pAV3pCYzXZuU(ataG4wh4(XfohRevxxhn8PfrlyiUNhp29GnXDf8McpcbkrrjCJ(3gdo3bG8zd8BfwKZkIORilJ9h7Or9EWYwQT6439S8lLpCR(xM2qbWZYdykIwZnqR9DtJddmHKcAwwO)2L5Ne)hSnW18mz6HkecxKdklHZ2qA489pGFw(oBSKHB9n(OoOTDlt0JZEyhDt0dUEY77FtwYuDs59ueQodMxJ4U7gq)YMAay7l)XKjDfpBsGLykPtBer7qliviWLbjKgBqM9Gu8AW6luD0P5WZaYiURSWRQ0P7iqmgAQBsA62Pgwh4MdmduucUnpz6A2Ik6cQOLNm490jViTGNtahEUt7AuNekz2bMSs04pkztLnjERVzNk5vZnXePEE7xUu5EP6x(u5d3V4(zwQrJermbNm5qNHp)tqGqFrPXXFr7YePMu2LHj7L5HrK2tfYyufEJEYfYUaewjElFJCCxLE)q1hLvUbjf0hSWKHFMTm2yyIXeLRAOr2K8exrQD5RJdDybx(TkSOLQgvlHcg)pfPudT)TXTsFhSU0ysAMgdpC2OUxz0WbqtraD)xanFM3FTT3DzHT6BdenwmHI41AtjzFqkZsFryHV5G5UB4S4xzDHz)irXIyiecNA22Tme5Xr4HifSeoPyBSbtQJiZqxmpurUXnAR6vxpHYfXWIckC80W6I7PiYdR(fe9KZpHZqTEYkiudJhQkdry8UrtXGC51(X335(MRFLlpG1sGIWE0LA4bDvPV8lLNHCjcbOqGm8SqnmS8agMmijChmDQLVcqG4iQ8AnICWtP7RzeM4AX7pZCJ)mZ9vPYg6PFVt)eRDr11hljkigsNqg0cMLP1dRDGvwXcQmreCZeR9J3B9RWX5WqkpK0LbgrFeuIlUt3)LeutKm(tdnax5uXIqCmemaMKQiwRggbFgmf(mhGV89IGTezkY3vMIY9b1gIumjDyusaHZgUHL8RNIWTcp(L9S(yO9ii2bg8iVZj3MH10H1MPh7IpIdty5zujVEiVzrWLM(chpI1c2SroOjxpucFNTVe(2hMKp)P1n)(Ral8UG7ij4mIHNIYpQRgDkFMqQUKEQavZ9s(YjoIs)i8c4HRlGIfE0Ce31rVcMqceU840ehHS9gGV(SKnuIicrk35Y(rKseQhphi0cVdYL7EsKErzhyD36x55cr))HYwOekoGUFoyDC3PdrEb9fwwrgJGUB536PINOu3EMRfEUAuQCeW3AyyQLORJaPKSfmtPFoNVVilbFrwoQmh)JYEj))gw1W6yu1)CV8xAtpWhGUEHIV5xF429MMII64U3mK6xtIX1pfHXV9ggdjiapfc7hs44MgqlPKfsfSlm0LUBSJUAkLDK9sgfb(CXofVrvHoebFwmulFr504AGt2RFZTIeEH)343xjKx4ppV7j9qTHpK8aV1aHo1H)l5sVNGjWBQWhJbRuMI9qj(vIhT)5yZPuUHsV5SUVrWGoVw21t(9NmZvIOLCRNSpkka7HPiB5zai2RQ6H)NaqY4r5(bEYlmg1fVbpZkEegSLm7HcWf7Oo2ePZeQxnSvrdKkjspwsfs60bOoemTuD92GYJIs2WHolfHMIux1gdeKGYUb3mgIZuezU6UTUbqwUHvxWypGVSD8WpH9hFX7ugCHveRDaOJ(T(iensVsx9ONbn63REZoD8ik(O7dUj59KDSxcSxCIhBVxKnKjajyg0xUWZBUpLaPTQGlhqCnCRPSjDxfFn59s1Z9HGtUWQm4ftNIy4rBh69vrgyG6DCCOIKKYqS0gHozFIkFOU5n5OzOV9V98UJ1)YrjmI7Ir(62CGM1gIKMSkpHmZQCX6SkvzLoARKFQPB7f)rBFVp9iEQzoppVnVj7US7f(Tg)UXKnBOPrnlTCX7uSubmSIvz3FeMZN)vpi4f7(KyVJi3nZgk3nXxRDm5nbri()Zh0QI3o(zfV06u9JSCmaW4r88W5xP0cFYklxz6fznENlX(NMKn6i7VL8TkZrgOXs84VoIJiWjUVZLoj2mtEip2J8xoTc4)HwCsSXojw6Jf1IqAsBvBjq7H6SVTJLnOTGWSV)73svXCUIiwO2j6gi0zu5xPvbvhmi)DFASYyhgDR)L7()m"
local ZBMWagoUrl = "https://wago.io/ssH2QdjlK"
local ZNDImportString = "NO STRING YET"
local ZNDWagoUrl = "no url yet"

local selectedTemplate = nil

ImpExpSidebar = ZNSidebarFrame.Subframes.ImpExp
ImpExpContent = ZNBodyFrame.Subframes.ImpExp

ImpExpSidebar.ImpExpPlayerDbButton = ZN.CreateGenericButton("ImpExpPlayerDbButton", ImpExpSidebar, "TOPLEFT", ImpExpSidebar, "TOPLEFT", 240, 30, 0, -30,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Playerspell DB", "CENTER",true )
ImpExpSidebar.ImpExpBossTemplateButton = ZN.CreateGenericButton("ImpExpBossTemplateButton", ImpExpSidebar, "TOPLEFT", ImpExpSidebar.ImpExpPlayerDbButton, "BOTTOMLEFT", 240, 30, 0, -10,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Boss Templates", "CENTER",true )
ImpExpSidebar.ImpExpGroupTemplateButton = ZN.CreateGenericButton("ImpExpBossTemplateButton", ImpExpSidebar, "TOPLEFT", ImpExpSidebar.ImpExpBossTemplateButton, "BOTTOMLEFT", 240, 30, 0, -10,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Group Templates", "CENTER",true )
ImpExpSidebar.ImpExpBossWeakaurasButton = ZN.CreateGenericButton("ImpExpBossWeakaurasButton", ImpExpSidebar, "TOPLEFT", ImpExpSidebar.ImpExpGroupTemplateButton, "BOTTOMLEFT", 240, 30, 0, -10,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Weakauras", "CENTER",true )

ImpExpContent.ImpExpInfoSubframe = ZN.createSubFrame("ImpExpInfoSubframe", ImpExpContent, 680, 530, ZN.Colors.BG, 1, "TOP","HIGH", false, 0, 0)
ImpExpContent.PlayerDbSubframe = ZN.createSubFrame("PlayerDbSubframe", ImpExpContent, 680, 530, ZN.Colors.BG, 1, "TOP","DIALOG", true, 0, 0)
ImpExpContent.BossTemplateSubframe = ZN.createSubFrame("BossTemplateSubframe", ImpExpContent, 680, 530, ZN.Colors.BG, 1, "TOP","DIALOG", true, 0, 0)
ImpExpContent.GroupTemplateSubframe = ZN.createSubFrame("GroupTemplateSubframe", ImpExpContent, 680, 530, ZN.Colors.BG, 1, "TOP","DIALOG", true, 0, 0)
ImpExpContent.WeakaurasSubframe = ZN.createSubFrame("WeakaurasSubframe", ImpExpContent, 680, 530, ZN.Colors.BG, 1, "TOP","DIALOG", true, 0, 0)

ImpExpSidebar.ImpExpPlayerDbButton:SetScript("OnClick", function(self) ZN:ToggleImpExpView("ImpExpContent.PlayerDbSubframe") end)
ImpExpSidebar.ImpExpBossTemplateButton:SetScript("OnClick", function(self) ZN:ToggleImpExpView("ImpExpContent.BossTemplateSubframe") end)
ImpExpSidebar.ImpExpGroupTemplateButton:SetScript("OnClick", function(self) ZN:ToggleImpExpView("ImpExpContent.GroupTemplateSubframe") end)
ImpExpSidebar.ImpExpBossWeakaurasButton:SetScript("OnClick", function(self) ZN:ToggleImpExpView("ImpExpContent.WeakaurasSubframe") end)
--[[ ##############################################################################
  Imp / Exp Info
############################################################################## --]]
ImpExpInfoSubframe = ImpExpContent.ImpExpInfoSubframe
ImpExpInfoSubframe.UrlButton = ZN.CreateGenericButton("HomeUrlButton", ImpExpInfoSubframe, "BOTTOM", ImpExpInfoSubframe, "BOTTOM", 640, 30, 0, 0,0,0, 10, ZN.Colors.INACTIVE, ZN.Colors.BG, nil, "www.zero-wow.de", "CENTER",false )
ImpExpInfoSubframe.UrlButton:SetScript("OnClick", function(self) ZN:ToggleInfo(self) end)
ImpExpInfoSubframe.MainTitle = ZN.CreateText(ImpExpInfoSubframe, "TOP", ImpExpInfoSubframe, "TOP", 680, 30, 0, -30, "Interface\\AddOns\\ZeroNotes\\Media\\Font\\ZNVers.ttf", 18, ZN.Colors.ACTIVE, "Import / Export", "LEFT", "TOP")
ImpExpInfoSubframe.MainIntro = ZN.CreateText(ImpExpInfoSubframe, "TOP", ImpExpInfoSubframe.MainTitle, "BOTTOM", 680, 300, 0, 0, "Interface\\AddOns\\ZeroNotes\\Media\\Font\\ZNTitle.ttf", 14, ZN.Colors.ACTIVE, 
"Here you can import Boss Templates and Spell Setups or export yours to share with others.\n\n"
.."|cff"..ZN.Colors.chatYell.."Warning:|r Importing a new Playerspell DB will override your current DB!\n\n"
.."If you want to extend the usage of your notes or you / member of your raid don't use ExRT have a look at the Weakauras Tab."
, "LEFT", "TOP",8)
--[[ ##############################################################################
  Player DB Imp / Exp
############################################################################## --]]
PlayerDbSubframe = ImpExpContent.PlayerDbSubframe
PlayerDbSubframe.EditBox = ZN.MultiLineEditBox("PlayerDbEditBox", PlayerDbSubframe, "TOP", PlayerDbSubframe, "TOP", 660, 450, 0, -65, 0, 0 ,12, ZN.Colors.ACTIVE, ZN.Colors.HD, nil, "", "LEFT")
PlayerDbSubframe.PlayerDbImportButton = ZN.CreateGenericButton("PlayerDbImportButton", PlayerDbSubframe, "BOTTOMRIGHT", PlayerDbSubframe.EditBox, "TOPRIGHT", 200, 30, 0, 10,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Import Spell DB", "CENTER",true )
PlayerDbSubframe.PlayerDbExportButton = ZN.CreateGenericButton("PlayerDbExportButton", PlayerDbSubframe, "RIGHT", PlayerDbSubframe.PlayerDbImportButton, "LEFT", 200, 30, -10, 0,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Export Spell DB", "CENTER",true )
--Import Player DB Confirmation
ZNPlayerImportConfirmFrame = ZN.createSubFrame("ZNPlayerImportConfirmFrame",ZNFrame, 302, 202, ZN.Colors.ROWBG, 1, 'CENTER', 'TOOLTIP', true)
ZNPlayerImportConfirmFrame:SetScript("OnMouseDown", function(self, button)end)
table.insert(ZN.DropDownsEdit, ZNPlayerImportConfirmFrame)
ZNPlayerImportConfirmFrame:SetBackdrop({bgFile = "Interface/Tooltips/UI-Tooltip-Background", 
  edgeFile = [[Interface\Buttons\WHITE8x8]],
  edgeSize = 1,
});
ZNPlayerImportConfirmFrame:SetBackdropColor(tonumber("0x"..ZN.Colors.HD:sub(1,2))/255, tonumber("0x"..ZN.Colors.HD:sub(3,4))/255, tonumber("0x"..ZN.Colors.HD:sub(5,6))/255, 1);
ZNPlayerImportConfirmFrame:SetBackdropBorderColor(tonumber("0x"..ZN.Colors.INACTIVE:sub(1,2))/255, tonumber("0x"..ZN.Colors.INACTIVE:sub(3,4))/255, tonumber("0x"..ZN.Colors.INACTIVE:sub(5,6))/255, 1);

ZNPlayerImportConfirmFrame.btnClose = ZN.CreateIconButton(ZNPlayerImportConfirmFrame, "TOPRIGHT", ZNPlayerImportConfirmFrame, "TOPRIGHT", 16, 16, -10, -10, "Interface\\AddOns\\ZeroNotes\\Media\\Texture\\x_big_active", ZN.Colors.ACTIVE, ZN.Colors.INACTIVE, false)
ZNPlayerImportConfirmFrame.Title = ZN.CreateText(ZNPlayerImportConfirmFrame, "TOP", ZNPlayerImportConfirmFrame, "TOP", 150, 30, 0, 0, "Interface\\AddOns\\ZeroNotes\\Media\\Font\\ZNReg.ttf", 14, ZN.Colors.ACTIVE, "IMPORT PLAYER DB")
ZNPlayerImportConfirmFrame.Message = ZN.CreateText(ZNPlayerImportConfirmFrame, "TOP", ZNPlayerImportConfirmFrame, "TOP", 260, 60, 0, -40, "Interface\\AddOns\\ZeroNotes\\Media\\Font\\ZNReg.ttf", 12, ZN.Colors.ACTIVE, "Importing will override your local Database\nAre you sure?", "CENTER")
ZNPlayerImportConfirmFrame.ConfirmButton = ZN.CreateGenericButton("ZNImportPlayerConfirmButton", ZNPlayerImportConfirmFrame, "BOTTOMLEFT", ZNPlayerImportConfirmFrame, "BOTTOMLEFT", 125, 30, 20, 20,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Confirm", "CENTER",true, ZN.Colors.HD )
ZNPlayerImportConfirmFrame.CancelButton = ZN.CreateGenericButton("ZNImportPlayerCancelButton", ZNPlayerImportConfirmFrame, "BOTTOMRIGHT", ZNPlayerImportConfirmFrame, "BOTTOMRIGHT", 125, 30, -20, 20,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Cancel", "CENTER",true, ZN.Colors.HD )

ZNPlayerImportConfirmFrame.btnClose:SetScript("OnClick", function(self) ZNPlayerImportConfirmFrame:Hide() end)
ZNPlayerImportConfirmFrame.CancelButton:SetScript("OnClick", function(self) ZNPlayerImportConfirmFrame:Hide() end)
-- Import
ZNPlayerImportConfirmFrame.ConfirmButton:SetScript("OnClick", function(self) 
  local str = PlayerDbSubframe.EditBox.editbox:GetText() 
  if not str or str == "" then
    UIErrorsFrame:AddMessage("Insert Import String", 0.8, 0.07, 0.2, 5.0)
    return
  end
  local decstr = ZN:dec(str)
  ZNotes.PlayerSpells = loadstring(decstr)()  
  ZN:ReloadPlayerTable()
  ZN:Print("Imported Player DB")
  ZNPlayerImportConfirmFrame:Hide()
end)
-- Export
-- https://stackoverflow.com/questions/6075262/lua-table-tostringtablename-and-table-fromstringstringtable-functions
PlayerDbSubframe.PlayerDbExportButton:SetScript("OnClick", function(self) 
  local str = ZN:serializeTable(ZNotes.PlayerSpells, nil, true) 
  
  PlayerDbSubframe.EditBox.editbox:SetText(ZN:enc(str)) 
end)

PlayerDbSubframe.PlayerDbImportButton:SetScript("OnClick", function(self) 
  ZNPlayerImportConfirmFrame:SetShown(not ZNPlayerImportConfirmFrame:IsShown());
end)
--[[ ##############################################################################
  Boss Template Imp / Exp
############################################################################## --]]
-- Import
BossTemplateSubframe.ImportEditBox = ZN.MultiLineEditBox("TemplateImportEditBox", BossTemplateSubframe, "BOTTOM", BossTemplateSubframe, "BOTTOM", 660, 180, 0, 15, 0, 0 ,12, ZN.Colors.ACTIVE, ZN.Colors.HD, nil, "", "LEFT")
BossTemplateSubframe.ImportNameTextBox = ZN.SingleLineEditBox("ImportNameTextBox", BossTemplateSubframe, "BOTTOMLEFT", BossTemplateSubframe.ImportEditBox, "TOPLEFT", 400, 30, 0, 10, 10, 0 ,12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Enter Template Name", "LEFT")
BossTemplateSubframe.TemplateImportButton = ZN.CreateGenericButton("TemplateImportButton", BossTemplateSubframe, "BOTTOMRIGHT", BossTemplateSubframe.ImportEditBox, "TOPRIGHT", 200, 30, 0, 10,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Import", "CENTER",true )

BossTemplateSubframe.TemplateImportButton:SetScript("OnClick", function(self) 
  local newTemplateName = BossTemplateSubframe.ImportNameTextBox:GetText()
  local encstr = BossTemplateSubframe.ImportEditBox.editbox:GetText()
  local decstr = ZN:dec(encstr)

  if newTemplateName == "Enter Template Name" or newTemplateName == "" then
    UIErrorsFrame:AddMessage("Please Enter a Name for your Template", 0.8, 0.07, 0.2, 5.0)    
    return
  end
  if encstr == "" then
    UIErrorsFrame:AddMessage("You need to insert an import string", 0.8, 0.07, 0.2, 5.0)
    return
  end

  ZNotes.BossTemplates[newTemplateName] = loadstring(decstr)()

  BossTemplateSubframe.ImportEditBox.editbox:SetText("|cff"..ZN.Colors.itemUncommon.."Template successfully imported as|r |cff"..ZN.Colors.chatInstance.."'"..newTemplateName.."'|r")
end)
-- Export
BossTemplateSubframe = ImpExpContent.BossTemplateSubframe
BossTemplateSubframe.ExportEditBox = ZN.MultiLineEditBox("TemplateExportEditBox", BossTemplateSubframe, "TOP", BossTemplateSubframe, "TOP", 660, 180, 0, -65, 0, 0 ,12, ZN.Colors.ACTIVE, ZN.Colors.HD, nil, "", "LEFT")
BossTemplateSubframe.TemplateSelectButton = ZN.CreateGenericButton("ZNBossTemplateSelectButton", BossTemplateSubframe, "BOTTOMLEFT", BossTemplateSubframe.ExportEditBox, "TOPLEFT", 240, 30, 0, 10,10,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Select Boss Template..", "LEFT",true )
BossTemplateSubframe.TemplateSelectButton.doOnUpdate = true
BossTemplateSubframe.TemplateSelectButton.OnUpdate = function(_,_,_,newValue) selectedTemplate = newValue end
BossTemplateSubframe.TemplateExportButton = ZN.CreateGenericButton("TemplateExportButton", BossTemplateSubframe, "BOTTOMRIGHT", BossTemplateSubframe.ExportEditBox, "TOPRIGHT", 200, 30, 0, 10,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Export", "CENTER",true )

BossTemplateSubframe.TemplateSelectButton:SetScript("OnClick", function(self) ZN:CreateDropdown(self, ZN:getTableKeys(ZNotes.BossTemplates), ZN:getTableOrder(ZNotes.BossTemplates), 240, ZN.Colors.INACTIVE, "LEFT", 10) end)
BossTemplateSubframe.TemplateExportButton:SetScript("OnClick", function(self) 
  if selectedTemplate == nil or selectedTemplate == "Select Boss Template.." then
    ZN:Print("You need to select a Boss Template")
    return
  end
  local str = ZN:serializeTable(ZNotes.BossTemplates[selectedTemplate], nil, true) 
  
  BossTemplateSubframe.ExportEditBox.editbox:SetText(ZN:enc(str)) 
end)
--[[ ##############################################################################
  Weakauras
############################################################################## --]]
WeakaurasSubframe = ImpExpContent.WeakaurasSubframe
WeakaurasSubframe.Title = ZN.CreateText(WeakaurasSubframe, "TOPLEFT", WeakaurasSubframe, "TOPLEFT", 680, 30, 0, -30, "Interface\\AddOns\\ZeroNotes\\Media\\Font\\ZNVers.ttf", 18, ZN.Colors.ACTIVE, "Zero Weakauras", "LEFT", "TOP")
WeakaurasSubframe.IntroText = ZN.CreateText(WeakaurasSubframe, "TOPLEFT", WeakaurasSubframe.Title, "BOTTOMLEFT", 680, 50, 0, 0, "Interface\\AddOns\\ZeroNotes\\Media\\Font\\ZNTitle.ttf", 14, ZN.Colors.ACTIVE,
"There are two Weakauras to supplement ZeroNotes."
, "LEFT", "TOP", 8)
-- ZBM
WeakaurasSubframe.ZBMTitle = ZN.CreateText(WeakaurasSubframe, "TOPLEFT", WeakaurasSubframe.IntroText, "BOTTOMLEFT", 680, 30, 0, 0, "Interface\\AddOns\\ZeroNotes\\Media\\Font\\ZNReg.ttf", 18, ZN.Colors.ACTIVE, "ZBM - Zero Boss Mods", "LEFT", "TOP")
WeakaurasSubframe.ZBMText = ZN.CreateText(WeakaurasSubframe, "TOPLEFT", WeakaurasSubframe.ZBMTitle, "BOTTOMLEFT", 680, 100, 0, 0, "Interface\\AddOns\\ZeroNotes\\Media\\Font\\ZNTitle.ttf", 14, ZN.Colors.ACTIVE,
"The ZBM Weakaura will show bossmod-like bars for your note. You can choose whether you want to have bars for every assigned cooldown or only your own.\n\n"
.."Please visit wago.io for further information"
, "LEFT", "TOP", 8)
WeakaurasSubframe.ZBMImportStringButton = ZN.CreateGenericButton("ZBMImportStringButton", WeakaurasSubframe, "TOPLEFT", WeakaurasSubframe.ZBMText, "BOTTOMLEFT", 200, 30, 0, -10,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "WA Import String", "CENTER",true )
WeakaurasSubframe.ZBMWagoButton = ZN.CreateGenericButton("ZBMWagoButton", WeakaurasSubframe, "LEFT", WeakaurasSubframe.ZBMImportStringButton, "RIGHT", 200, 30, 10, 0,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "wago.io", "CENTER",true )
-- ZBM Import Frame
WeakaurasSubframe.ZBMImportStringFrame = ZN.createSubFrame("ZBMImportStringFrame", WeakaurasSubframe, 680, 530, ZN.Colors.BG, 1, "TOP","DIALOG", true, 0, 0)
WeakaurasSubframe.ZBMImportStringFrame.btnClose = ZN.CreateIconButton(WeakaurasSubframe.ZBMImportStringFrame, "TOPRIGHT", WeakaurasSubframe.ZBMImportStringFrame, "TOPRIGHT", 16, 16, -10, -10, "Interface\\AddOns\\ZeroNotes\\Media\\Texture\\x_big_active", ZN.Colors.ACTIVE, ZN.Colors.INACTIVE, false)
WeakaurasSubframe.ZBMImportStringFrame.editbox = ZN.MultiLineEditBox("ZBMImportEditBoxFrame", WeakaurasSubframe.ZBMImportStringFrame, "TOP", WeakaurasSubframe.ZBMImportStringFrame, "TOP", 680, 450, 0, -65, 0, 0 ,12, ZN.Colors.ACTIVE, ZN.Colors.HD, nil, ZBMImportString, "LEFT")
-- ZBM Wago Url Frame
ZBMWagoUrlFrame = ZN.createSubFrame("ZBMWagoUrlFrame",ZNFrame, 302, 152, ZN.Colors.ROWBG, 1, 'CENTER', 'TOOLTIP', true)
ZBMWagoUrlFrame:SetScript("OnMouseDown", function(self, button)end)
table.insert(ZN.DropDownsEdit, ZBMWagoUrlFrame)
ZBMWagoUrlFrame:SetBackdrop({bgFile = "Interface/Tooltips/UI-Tooltip-Background", 
  edgeFile = [[Interface\Buttons\WHITE8x8]],
  edgeSize = 1,
});
ZBMWagoUrlFrame:SetBackdropColor(tonumber("0x"..ZN.Colors.HD:sub(1,2))/255, tonumber("0x"..ZN.Colors.HD:sub(3,4))/255, tonumber("0x"..ZN.Colors.HD:sub(5,6))/255, 1);
ZBMWagoUrlFrame:SetBackdropBorderColor(tonumber("0x"..ZN.Colors.INACTIVE:sub(1,2))/255, tonumber("0x"..ZN.Colors.INACTIVE:sub(3,4))/255, tonumber("0x"..ZN.Colors.INACTIVE:sub(5,6))/255, 1);
ZBMWagoUrlFrame.btnClose = ZN.CreateIconButton(ZBMWagoUrlFrame, "TOPRIGHT", ZBMWagoUrlFrame, "TOPRIGHT", 16, 16, -10, -10, "Interface\\AddOns\\ZeroNotes\\Media\\Texture\\x_big_active", ZN.Colors.ACTIVE, ZN.Colors.INACTIVE, false)
ZBMWagoUrlFrame.UrlBox = ZN.SingleLineEditBox("UrlBox", ZBMWagoUrlFrame, "CENTER", ZBMWagoUrlFrame, "CENTER", 250, 30, 0, 0, 20, 0 ,12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, ZBMWagoUrl, "CENTER")
-- ZBM Button Functions
WeakaurasSubframe.ZBMImportStringFrame.btnClose:SetScript("OnClick", function(self) WeakaurasSubframe.ZBMImportStringFrame:Hide() end)
WeakaurasSubframe.ZBMImportStringButton:SetScript("OnClick", function(self) WeakaurasSubframe.ZBMImportStringFrame:Show() end)
WeakaurasSubframe.ZBMWagoButton:SetScript("OnClick", function(self) ZBMWagoUrlFrame:Show() end)
ZBMWagoUrlFrame.btnClose:SetScript("OnClick", function(self) ZBMWagoUrlFrame:Hide() end)
-- ZND
WeakaurasSubframe.ZNDTitle = ZN.CreateText(WeakaurasSubframe, "TOPLEFT", WeakaurasSubframe.ZBMImportStringButton, "BOTTOMLEFT", 680, 30, 0, -30, "Interface\\AddOns\\ZeroNotes\\Media\\Font\\ZNReg.ttf", 18, ZN.Colors.ACTIVE, "ZND - Zero Note Display", "LEFT", "TOP")
WeakaurasSubframe.ZNDText = ZN.CreateText(WeakaurasSubframe, "TOPLEFT", WeakaurasSubframe.ZNDTitle, "BOTTOMLEFT", 680, 100, 0, 0, "Interface\\AddOns\\ZeroNotes\\Media\\Font\\ZNTitle.ttf", 14, ZN.Colors.ACTIVE,
"If you or members of your raid don't use ExRT, you can use the ZND Weakaura to show your notes on screen.\n\n"
.."Please visit wago.io for further information"
, "LEFT", "TOP", 8)
WeakaurasSubframe.ZNDImportStringButton = ZN.CreateGenericButton("ZBMImportStringButton", WeakaurasSubframe, "TOPLEFT", WeakaurasSubframe.ZNDText, "BOTTOMLEFT", 200, 30, 0, -10,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "WA Import String", "CENTER",true )
WeakaurasSubframe.ZNDWagoButton = ZN.CreateGenericButton("ZBMWagoButton", WeakaurasSubframe, "LEFT", WeakaurasSubframe.ZNDImportStringButton, "RIGHT", 200, 30, 10, 0,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "wago.io", "CENTER",true )
-- ZND Import Frame
WeakaurasSubframe.ZNDImportStringFrame = ZN.createSubFrame("ZNDImportStringFrame", WeakaurasSubframe, 680, 530, ZN.Colors.BG, 1, "TOP","DIALOG", true, 0, 0)
WeakaurasSubframe.ZNDImportStringFrame.btnClose = ZN.CreateIconButton(WeakaurasSubframe.ZNDImportStringFrame, "TOPRIGHT", WeakaurasSubframe.ZNDImportStringFrame, "TOPRIGHT", 16, 16, -10, -10, "Interface\\AddOns\\ZeroNotes\\Media\\Texture\\x_big_active", ZN.Colors.ACTIVE, ZN.Colors.INACTIVE, false)
WeakaurasSubframe.ZNDImportStringFrame.editbox = ZN.MultiLineEditBox("ZNDImportEditBox", WeakaurasSubframe.ZNDImportStringFrame, "TOP", WeakaurasSubframe.ZNDImportStringFrame, "TOP", 680, 450, 0, -65, 0, 0 ,12, ZN.Colors.ACTIVE, ZN.Colors.HD, nil, ZNDImportString, "LEFT")
-- ZND Wago Url Frame
ZNDWagoUrlFrame = ZN.createSubFrame("ZNDWagoUrlFrame",ZNFrame, 302, 152, ZN.Colors.ROWBG, 1, 'CENTER', 'TOOLTIP', true)
ZNDWagoUrlFrame:SetScript("OnMouseDown", function(self, button)end)
table.insert(ZN.DropDownsEdit, ZNDWagoUrlFrame)
ZNDWagoUrlFrame:SetBackdrop({bgFile = "Interface/Tooltips/UI-Tooltip-Background", 
  edgeFile = [[Interface\Buttons\WHITE8x8]],
  edgeSize = 1,
});
ZNDWagoUrlFrame:SetBackdropColor(tonumber("0x"..ZN.Colors.HD:sub(1,2))/255, tonumber("0x"..ZN.Colors.HD:sub(3,4))/255, tonumber("0x"..ZN.Colors.HD:sub(5,6))/255, 1);
ZNDWagoUrlFrame:SetBackdropBorderColor(tonumber("0x"..ZN.Colors.INACTIVE:sub(1,2))/255, tonumber("0x"..ZN.Colors.INACTIVE:sub(3,4))/255, tonumber("0x"..ZN.Colors.INACTIVE:sub(5,6))/255, 1);
ZNDWagoUrlFrame.btnClose = ZN.CreateIconButton(ZNDWagoUrlFrame, "TOPRIGHT", ZNDWagoUrlFrame, "TOPRIGHT", 16, 16, -10, -10, "Interface\\AddOns\\ZeroNotes\\Media\\Texture\\x_big_active", ZN.Colors.ACTIVE, ZN.Colors.INACTIVE, false)
ZNDWagoUrlFrame.UrlBox = ZN.SingleLineEditBox("UrlBox", ZNDWagoUrlFrame, "CENTER", ZNDWagoUrlFrame, "CENTER", 250, 30, 0, 0, 20, 0 ,12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, ZNDWagoUrl, "CENTER")
-- ZND Button Functions
WeakaurasSubframe.ZNDImportStringFrame.btnClose:SetScript("OnClick", function(self) WeakaurasSubframe.ZNDImportStringFrame:Hide() end)
WeakaurasSubframe.ZNDImportStringButton:SetScript("OnClick", function(self) WeakaurasSubframe.ZNDImportStringFrame:Show() end)
WeakaurasSubframe.ZNDWagoButton:SetScript("OnClick", function(self) ZNDWagoUrlFrame:Show() end)
ZNDWagoUrlFrame.btnClose:SetScript("OnClick", function(self) ZNDWagoUrlFrame:Hide() end)
--[[ ##############################################################################
  Player Group Imp / Exp
############################################################################## --]]
-- Import
GroupTemplateSubframe = ImpExpContent.GroupTemplateSubframe
GroupTemplateSubframe.ImportEditBox = ZN.MultiLineEditBox("GRPTemplateImportEditBox", GroupTemplateSubframe, "BOTTOM", GroupTemplateSubframe, "BOTTOM", 660, 180, 0, 15, 0, 0 ,12, ZN.Colors.ACTIVE, ZN.Colors.HD, nil, "", "LEFT")
GroupTemplateSubframe.ImportNameTextBox = ZN.SingleLineEditBox("ImportNameTextBox", GroupTemplateSubframe, "BOTTOMLEFT", GroupTemplateSubframe.ImportEditBox, "TOPLEFT", 400, 30, 0, 10, 10, 0 ,12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Enter Template Name", "LEFT")
GroupTemplateSubframe.TemplateImportButton = ZN.CreateGenericButton("TemplateImportButton", GroupTemplateSubframe, "BOTTOMRIGHT", GroupTemplateSubframe.ImportEditBox, "TOPRIGHT", 200, 30, 0, 10,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Import", "CENTER",true )

GroupTemplateSubframe.TemplateImportButton:SetScript("OnClick", function(self) 
  local newTemplateName = GroupTemplateSubframe.ImportNameTextBox:GetText()
  local encstr = GroupTemplateSubframe.ImportEditBox.editbox:GetText()
  local decstr = ZN:dec(encstr)

  if newTemplateName == "Enter Template Name" or newTemplateName == "" then
    UIErrorsFrame:AddMessage("Please Enter a Name for your Template", 0.8, 0.07, 0.2, 5.0)    
    return
  end
  if encstr == "" then
    UIErrorsFrame:AddMessage("You need to insert an import string", 0.8, 0.07, 0.2, 5.0)
    return
  end

  ZNotes.GroupTemplates[newTemplateName] = loadstring(decstr)()

  GroupTemplateSubframe.ImportEditBox.editbox:SetText("|cff"..ZN.Colors.itemUncommon.."Template successfully imported as|r |cff"..ZN.Colors.chatInstance.."'"..newTemplateName.."'|r")
end)
-- Export
GroupTemplateSubframe = ImpExpContent.GroupTemplateSubframe
GroupTemplateSubframe.ExportEditBox = ZN.MultiLineEditBox("GRPTemplateExportEditBox", GroupTemplateSubframe, "TOP", GroupTemplateSubframe, "TOP", 660, 180, 0, -65, 0, 0 ,12, ZN.Colors.ACTIVE, ZN.Colors.HD, nil, "", "LEFT")
GroupTemplateSubframe.TemplateSelectButton = ZN.CreateGenericButton("ZNGroupTemplateSelectButton", GroupTemplateSubframe, "BOTTOMLEFT", GroupTemplateSubframe.ExportEditBox, "TOPLEFT", 240, 30, 0, 10,10,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Select Group Template..", "LEFT",true )
GroupTemplateSubframe.TemplateSelectButton.doOnUpdate = true
GroupTemplateSubframe.TemplateSelectButton.OnUpdate = function(_,_,_,newValue) selectedTemplate = newValue end
GroupTemplateSubframe.TemplateExportButton = ZN.CreateGenericButton("TemplateExportButton", GroupTemplateSubframe, "BOTTOMRIGHT", GroupTemplateSubframe.ExportEditBox, "TOPRIGHT", 200, 30, 0, 10,0,0, 12, ZN.Colors.ACTIVE, ZN.Colors.SBButtonBG, nil, "Export", "CENTER",true )

GroupTemplateSubframe.TemplateSelectButton:SetScript("OnClick", function(self) ZN:CreateDropdown(self, ZN:getTableKeys(ZNotes.GroupTemplates), ZN:getTemplateTableWithoutCurrentOrder(ZNotes.GroupTemplates), 240, ZN.Colors.INACTIVE, "LEFT", 10) end)
GroupTemplateSubframe.TemplateExportButton:SetScript("OnClick", function(self) 
  if selectedTemplate == nil or selectedTemplate == "Select Group Template.." then
    ZN:Print("You need to select a Group Template")
    return
  end
  local str = ZN:serializeTable(ZNotes.GroupTemplates[selectedTemplate], nil, true) 
  
  GroupTemplateSubframe.ExportEditBox.editbox:SetText(ZN:enc(str)) 
end)